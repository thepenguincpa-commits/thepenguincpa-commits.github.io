import{r as N,t as D,o as m,j as e,R as L,u as R,a1 as w,aC as F}from"./index.CJpzWARr.js";import{G as v}from"./GridRow.DmVNsMLH.js";import"./AppLayout.Dd4AyXhP.js";import{L as A}from"./LayoutContainer.kUniMi3O.js";import{d as P}from"./OfferPayoutRepository.DMRgHBdS.js";import{O as E,s as O,L as S}from"./LocationsTable.Dr_CxosK.js";import{u as x}from"./useTranslation.D1-YSIqG.js";import{B as I}from"./Box.CvVauy6S.js";import{C as i}from"./row.ZVKcDUTg.js";import{I as Q,L as W}from"./LanguageName.DxFQWD1J.js";import{T as j}from"./index.mfBRClzR.js";import{D as c}from"./index.BPpU5WLk.js";import{C as h}from"./Input.BJc5rBil.js";import{B as G}from"./button.CTAkPJpI.js";import{r as f}from"./renderReactiveCell.D7yC0G9H.js";import{C as M}from"./CountryName.Cqd_TUYv.js";import{D as y}from"./DateFormat.CyIrXEyF.js";import{T as q}from"./AntdIcon.BEv94oZ9.js";import{F as z}from"./Table.CnZn0sov.js";import"./index.5jmBMbM4.js";import"./webmasterOffersApi.CMJMZz74.js";import"./OfferDomainRepository.C35Cl61S.js";import"./Currency.Cy3QZbvy.js";import"./FlagIcon.DC8lzl7_.js";import"./NumberFormat.TovQIcex.js";import"./EyeOutlined.C4wc5N2Y.js";import"./index.CvuYUNlW.js";import"./useClosable.Emosx8Km.js";import"./index.C7EzEdlH.js";import"./index.B7lSVg36.js";var K=Object.defineProperty,H=(o,r,s)=>r in o?K(o,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[r]=s,b=(o,r,s)=>H(o,typeof r!="symbol"?r+"":r,s);class J{constructor(r,s){b(this,"offerQuery"),b(this,"categoriesQuery"),this.categoriesQuery=new P(r),this.offerQuery=new E(r,this.categoriesQuery,s),D(this,{},{autoBind:!0})}dispose(){console.log("dispose")}init(){console.log("init")}}const U=N.createContext(null),V="_image_jqetl_1",X="_tags_jqetl_5",_={image:V,tags:X},Y=m(function({offerQuery:r}){const{t:s,locale:a}=x("offer"),n=r.store.offer,d=r.store.category;return e.jsxs(v,{vGutter:12,children:[e.jsx(i,{xs:24,sm:10,md:10,lg:10,xl:11,xxl:12,children:e.jsx(Q,{className:_.image,src:n.image,alt:n.title})}),e.jsxs(i,{xs:24,sm:14,md:14,lg:14,xl:13,xxl:12,children:[e.jsxs(I,{className:_.tags,children:[n.isTopOffer&&e.jsx(j,{color:"blue",children:s("status.isTopOffer")}),n.isExclusive&&e.jsx(j,{color:"purple",children:s("status.isExclusive")})]}),e.jsxs(c,{layout:"horizontal",children:[e.jsx(c.Item,{span:"filled",label:s("page.vertical"),children:s(`vertical.${n.vertical}`)}),e.jsx(c.Item,{span:"filled",label:s("page.category"),children:a.code==="ru"?d.nameRu:d.nameEn}),e.jsx(c.Item,{span:"filled",label:s("page.description"),children:n.subtitle}),e.jsx(c.Item,{span:"filled",label:"CR",children:n.cr}),e.jsx(c.Item,{span:"filled",label:s("page.approve"),children:n.approve})]})]}),e.jsxs(i,{xs:24,children:[e.jsxs("h5",{children:[s("page.rules"),":"]}),e.jsx("p",{children:n.rules})]})]})}),Z=m(function({offerQuery:r}){const{t:s}=x("offer"),a=r.store.offer;return e.jsx(h,{title:`${s("page.offer")}: ${a.title}`,extra:e.jsx(e.Fragment,{children:e.jsx(G,{type:"primary",children:"Подключить оффер"})}),children:e.jsx(Y,{offerQuery:r})})}),k="_card_42l30_1",ee="_card_body_42l30_5",se="_table_42l30_9",re="_image_42l30_34",te="_secondary_42l30_38",u={card:k,card_body:ee,table:se,image:re,secondary:te},ae={body:u.card_body},C=m(function({type:r,offerQuery:s}){const{t:a}=x("offer");return e.jsx(h,{title:`${a(`page.${r}`)}`,className:u.card,classNames:ae,children:e.jsx(oe,{offerQuery:s,type:r})})}),oe=m(function({type:r,offerQuery:s}){const{t:a}=x("offer"),n=r==="landing"?s.store.landings:s.store.transits,d=s.store.locations,T=N.useMemo(()=>[{title:a("domains.image"),render:f(({domain:t})=>e.jsx(I,{gap:"xs",align:"center",justify:"start",onClick:l=>l.stopPropagation(),children:e.jsx(Q,{className:u.image,src:t.image,alt:t.title})}))},{title:a("domains.geo"),render:f(({location:t})=>e.jsx(M,{code:t.country}))},{title:a("domains.languages"),render:f(({domain:t})=>{const l=t.languages.map((g,B)=>e.jsxs(L.Fragment,{children:[e.jsx(W,{code:g}),B<t.languages.length-1&&e.jsx("br",{})]},g));return t.languages.length>4?e.jsx(q,{overlay:l,children:e.jsxs(j,{children:[" ",t.languages.length," "]})}):l})},{title:"CR",render:f(({domain:t})=>t.cr)},{title:a("domains.updated"),render:f(({domain:t})=>e.jsxs(e.Fragment,{children:[e.jsx(y,{value:t.updatedAt||t.createdAt,dateStyle:"short"}),e.jsx("br",{}),e.jsx("span",{className:u.secondary,children:e.jsx(y,{value:t.updatedAt||t.createdAt,timeStyle:"short"})})]}))}],[a]),$=n.map(t=>{const l=d.find(g=>g.id===t.id)||d[0];return{id:t.id,location:l,domain:t}});return e.jsx(z,{rowKey:"id",columns:T,pagination:!1,dataSource:$,className:u.table})}),ne={body:O.card_body},ie=m(function({offerQuery:r}){const{t:s}=x("offer");return e.jsx(h,{classNames:ne,className:O.card,title:`${s("page.geo")}`,children:e.jsx(S,{offerQuery:r})})}),le="_section_1cu6l_1",p={section:le},ce=m(function({offerId:r}){const s=R(),a=w(()=>new J(s,r),[s,r]);return e.jsx(U.Provider,{value:a,children:e.jsx(A,{className:p.container,children:e.jsxs(v,{children:[e.jsx(i,{xs:24,xxl:12,className:p.section,children:e.jsx(Z,{offerQuery:a.offerQuery})}),e.jsx(i,{xs:24,xxl:12,className:p.section,children:e.jsx(ie,{offerQuery:a.offerQuery})}),e.jsx(i,{xs:24,xxl:12,className:p.section,children:e.jsx(C,{offerQuery:a.offerQuery,type:"landing"})}),e.jsx(i,{xs:24,xxl:12,className:p.section,children:e.jsx(C,{offerQuery:a.offerQuery,type:"transit"})})]})})})}),We=()=>{const o=F.useParams();return e.jsx(ce,{offerId:o.offerId})};export{We as component};
