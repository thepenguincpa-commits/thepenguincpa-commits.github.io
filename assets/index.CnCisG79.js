import{r as l,ab as N,R as y,ac as We,aL as Ae,c as te,aM as ne,E as _,ak as oe,s as w,aj as He,at as De,au as Ve,X as qe,T as Z,aI as Qe,aN as le,aO as Xe,aP as Ze,$ as Ge,a9 as Ue,aa as Ye,aQ as Je,aR as Ke,aS as et,d as tt}from"./index.CJpzWARr.js";import{C as nt,f as F}from"./AntdIcon.BEv94oZ9.js";import{A as se}from"./ActionButton.D2hXE_0n.js";import{u as re,D as ot,p as lt,a as st,P as rt}from"./index.CvuYUNlW.js";import{u as at,p as G}from"./useClosable.Emosx8Km.js";import{u as z,S as ct}from"./Input.BJc5rBil.js";import{u as it}from"./Toggler.Bo1KxCe6.js";import{B as ae,c as ut}from"./button.CTAkPJpI.js";import{w as dt}from"./index.C7EzEdlH.js";function ft(){const[e,n]=l.useState([]),s=l.useCallback(t=>(n(o=>[].concat(N(o),[t])),()=>{n(o=>o.filter(c=>c!==t))}),[]);return[e,s]}const k=y.createContext({}),{Provider:ce}=k,U=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:s,isSilent:t,mergedOkCancel:o,rootPrefixCls:c,close:d,onCancel:i,onConfirm:a}=l.useContext(k);return o?y.createElement(se,{isSilent:t,actionFn:i,close:(...u)=>{d?.apply(void 0,u),a?.(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${c}-btn`},s):null},Y=()=>{const{autoFocusButton:e,close:n,isSilent:s,okButtonProps:t,rootPrefixCls:o,okTextLocale:c,okType:d,onConfirm:i,onOk:a}=l.useContext(k);return y.createElement(se,{isSilent:s,type:d||"primary",actionFn:a,close:(...u)=>{n?.apply(void 0,u),i?.(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},c)},mt=()=>We()&&window.document.documentElement,J=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:s}=l.useContext(k);return y.createElement(ae,Object.assign({onClick:s},e),n)},K=()=>{const{confirmLoading:e,okButtonProps:n,okType:s,okTextLocale:t,onOk:o}=l.useContext(k);return y.createElement(ae,Object.assign({},ut(s),{loading:e,onClick:o},n),t)};function ie(e,n){return y.createElement("span",{className:`${e}-close-x`},n||y.createElement(te,{className:`${e}-close-icon`}))}const ue=e=>{const{okText:n,okType:s="primary",cancelText:t,confirmLoading:o,onOk:c,onCancel:d,okButtonProps:i,cancelButtonProps:a,footer:u}=e,[r]=z("Modal",ne()),f=n||r?.okText,p=t||r?.cancelText,C={confirmLoading:o,okButtonProps:i,cancelButtonProps:a,okTextLocale:f,cancelTextLocale:p,okType:s,onOk:c,onCancel:d},b=y.useMemo(()=>C,N(Object.values(C)));let m;return typeof u=="function"||typeof u>"u"?(m=y.createElement(y.Fragment,null,y.createElement(J,null),y.createElement(K,null)),typeof u=="function"&&(m=u(m,{OkBtn:K,CancelBtn:J})),m=y.createElement(ce,{value:b},m)):m=u,y.createElement(Ae,{disabled:!1},m)};var Ct=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};let L;const gt=e=>{L={x:e.pageX,y:e.pageY},setTimeout(()=>{L=null},100)};mt()&&document.documentElement.addEventListener("click",gt,!0);const de=e=>{const{prefixCls:n,className:s,rootClassName:t,open:o,wrapClassName:c,centered:d,getContainer:i,focusTriggerAfterClose:a=!0,style:u,visible:r,width:f=520,footer:p,classNames:C,styles:b,children:m,loading:x,confirmLoading:g,zIndex:v,mousePosition:P,onOk:j,onCancel:T,destroyOnHidden:h,destroyOnClose:Pe,panelRef:he=null}=e,$e=Ct(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose","panelRef"]),{getPopupContainer:Ee,getPrefixCls:W,direction:je,modal:O}=l.useContext(_),A=I=>{g||T?.(I)},Te=I=>{j?.(I)},$=W("modal",n),H=W(),D=oe($),[Ie,V,we]=re($,D),Ne=w(c,{[`${$}-centered`]:d??O?.centered,[`${$}-wrap-rtl`]:je==="rtl"}),Se=p!==null&&!x?l.createElement(ue,Object.assign({},e,{onOk:Te,onCancel:A})):null,[q,Q,ke,Me]=at(G(e),G(O),{closable:!0,closeIcon:l.createElement(te,{className:`${$}-close-icon`}),closeIconRender:I=>ie($,I)}),Re=it(`.${$}-content`),Be=He(he,Re),[Fe,_e]=De("Modal",v),[Le,R]=l.useMemo(()=>f&&typeof f=="object"?[void 0,f]:[f,void 0],[f]),ze=l.useMemo(()=>{const I={};return R&&Object.keys(R).forEach(X=>{const B=R[X];B!==void 0&&(I[`--${$}-${X}-width`]=typeof B=="number"?`${B}px`:B)}),I},[R]);return Ie(l.createElement(nt,{form:!0,space:!0},l.createElement(Ve.Provider,{value:_e},l.createElement(ot,Object.assign({width:Le},$e,{zIndex:Fe,getContainer:i===void 0?Ee:i,prefixCls:$,rootClassName:w(V,t,we,D),footer:Se,visible:o??r,mousePosition:P??L,onClose:A,closable:q&&Object.assign({disabled:ke,closeIcon:Q},Me),closeIcon:Q,focusTriggerAfterClose:a,transitionName:F(H,"zoom",e.transitionName),maskTransitionName:F(H,"fade",e.maskTransitionName),className:w(V,s,O?.className),style:Object.assign(Object.assign(Object.assign({},O?.style),u),ze),classNames:Object.assign(Object.assign(Object.assign({},O?.classNames),C),{wrapper:w(Ne,C?.wrapper)}),styles:Object.assign(Object.assign({},O?.styles),b),panelRef:Be,destroyOnClose:h??Pe}),x?l.createElement(ct,{active:!0,title:!1,paragraph:{rows:4},className:`${$}-body-skeleton`}):m))))},vt=e=>{const{componentCls:n,titleFontSize:s,titleLineHeight:t,modalConfirmIconSize:o,fontSize:c,lineHeight:d,modalTitleHeight:i,fontHeight:a,confirmBodyPadding:u}=e,r=`${n}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},Qe()),[`&${n} ${n}-body`]:{padding:u},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(a).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Z(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Z(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:s,lineHeight:t},[`${r}-content`]:{color:e.colorText,fontSize:c,lineHeight:d},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},pt=qe(["Modal","confirm"],e=>{const n=lt(e);return vt(n)},st,{order:-1e3});var bt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};function fe(e){const{prefixCls:n,icon:s,okText:t,cancelText:o,confirmPrefixCls:c,type:d,okCancel:i,footer:a,locale:u}=e,r=bt(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=s;if(!s&&s!==null)switch(d){case"info":f=l.createElement(Je,null);break;case"success":f=l.createElement(Ye,null);break;case"error":f=l.createElement(Ue,null);break;default:f=l.createElement(Ge,null)}const p=i??d==="confirm",C=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[b]=z("Modal"),m=u||b,x=t||(p?m?.okText:m?.justOkText),g=o||m?.cancelText,v=Object.assign({autoFocusButton:C,cancelTextLocale:g,okTextLocale:x,mergedOkCancel:p},r),P=l.useMemo(()=>v,N(Object.values(v))),j=l.createElement(l.Fragment,null,l.createElement(U,null),l.createElement(Y,null)),T=e.title!==void 0&&e.title!==null,h=`${c}-body`;return l.createElement("div",{className:`${c}-body-wrapper`},l.createElement("div",{className:w(h,{[`${h}-has-title`]:T})},f,l.createElement("div",{className:`${c}-paragraph`},T&&l.createElement("span",{className:`${c}-title`},e.title),l.createElement("div",{className:`${c}-content`},e.content))),a===void 0||typeof a=="function"?l.createElement(ce,{value:P},l.createElement("div",{className:`${c}-btns`},typeof a=="function"?a(j,{OkBtn:Y,CancelBtn:U}):j)):a,l.createElement(pt,{prefixCls:n}))}const xt=e=>{const{close:n,zIndex:s,maskStyle:t,direction:o,prefixCls:c,wrapClassName:d,rootPrefixCls:i,bodyStyle:a,closable:u=!1,onConfirm:r,styles:f}=e,p=`${c}-confirm`,C=e.width||416,b=e.style||{},m=e.mask===void 0?!0:e.mask,x=e.maskClosable===void 0?!1:e.maskClosable,g=w(p,`${p}-${e.type}`,{[`${p}-rtl`]:o==="rtl"},e.className),[,v]=Xe(),P=l.useMemo(()=>s!==void 0?s:v.zIndexPopupBase+Ze,[s,v]);return l.createElement(de,Object.assign({},e,{className:g,wrapClassName:w({[`${p}-centered`]:!!e.centered},d),onCancel:()=>{n?.({triggerCancel:!0}),r?.(!1)},title:"",footer:null,transitionName:F(i||"","zoom",e.transitionName),maskTransitionName:F(i||"","fade",e.maskTransitionName),mask:m,maskClosable:x,style:b,styles:Object.assign({body:a,mask:t},f),width:C,zIndex:P,closable:u}),l.createElement(fe,Object.assign({},e,{confirmPrefixCls:p})))},me=e=>{const{rootPrefixCls:n,iconPrefixCls:s,direction:t,theme:o}=e;return l.createElement(le,{prefixCls:n,iconPrefixCls:s,direction:t,theme:o},l.createElement(xt,Object.assign({},e)))},S=[];let Ce="";function ge(){return Ce}const yt=e=>{var n,s;const{prefixCls:t,getContainer:o,direction:c}=e,d=ne(),i=l.useContext(_),a=ge()||i.getPrefixCls(),u=t||`${a}-modal`;let r=o;return r===!1&&(r=void 0),y.createElement(me,Object.assign({},e,{rootPrefixCls:a,prefixCls:u,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:c??i.direction,locale:(s=(n=i.locale)===null||n===void 0?void 0:n.Modal)!==null&&s!==void 0?s:d,getContainer:r}))};function M(e){const n=Ke(),s=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:a,open:!0}),o,c;function d(...r){var f;if(r.some(b=>b?.triggerCancel)){var C;(f=e.onCancel)===null||f===void 0||(C=f).call.apply(C,[e,()=>{}].concat(N(r.slice(1))))}for(let b=0;b<S.length;b++)if(S[b]===a){S.splice(b,1);break}c()}function i(r){clearTimeout(o),o=setTimeout(()=>{const f=n.getPrefixCls(void 0,ge()),p=n.getIconPrefixCls(),C=n.getTheme(),b=y.createElement(yt,Object.assign({},r));c=et()(y.createElement(le,{prefixCls:f,iconPrefixCls:p,theme:C},n.holderRender?n.holderRender(b):b),s)})}function a(...r){t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),d.apply(this,r)}}),t.visible&&delete t.visible,i(t)}function u(r){typeof r=="function"?t=r(t):t=Object.assign(Object.assign({},t),r),i(t)}return i(t),S.push(a),{destroy:a,update:u}}function ve(e){return Object.assign(Object.assign({},e),{type:"warning"})}function pe(e){return Object.assign(Object.assign({},e),{type:"info"})}function be(e){return Object.assign(Object.assign({},e),{type:"success"})}function xe(e){return Object.assign(Object.assign({},e),{type:"error"})}function ye(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ot({rootPrefixCls:e}){Ce=e}var Pt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const ht=(e,n)=>{var s,{afterClose:t,config:o}=e,c=Pt(e,["afterClose","config"]);const[d,i]=l.useState(!0),[a,u]=l.useState(o),{direction:r,getPrefixCls:f}=l.useContext(_),p=f("modal"),C=f(),b=()=>{var v;t(),(v=a.afterClose)===null||v===void 0||v.call(a)},m=(...v)=>{var P;if(i(!1),v.some(h=>h?.triggerCancel)){var T;(P=a.onCancel)===null||P===void 0||(T=P).call.apply(T,[a,()=>{}].concat(N(v.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:m,update:v=>{u(P=>{const j=typeof v=="function"?v(P):v;return Object.assign(Object.assign({},P),j)})}}));const x=(s=a.okCancel)!==null&&s!==void 0?s:a.type==="confirm",[g]=z("Modal",tt.Modal);return l.createElement(me,Object.assign({prefixCls:p,rootPrefixCls:C},a,{close:m,open:d,afterClose:b,okText:a.okText||(x?g?.okText:g?.justOkText),direction:a.direction||r,cancelText:a.cancelText||g?.cancelText},c))},$t=l.forwardRef(ht);let ee=0;const Et=l.memo(l.forwardRef((e,n)=>{const[s,t]=ft();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,s)}));function jt(){const e=l.useRef(null),[n,s]=l.useState([]);l.useEffect(()=>{n.length&&(N(n).forEach(d=>{d()}),s([]))},[n]);const t=l.useCallback(c=>function(i){var a;ee+=1;const u=l.createRef();let r;const f=new Promise(x=>{r=x});let p=!1,C;const b=l.createElement($t,{key:`modal-${ee}`,config:c(i),ref:u,afterClose:()=>{C?.()},isSilent:()=>p,onConfirm:x=>{r(x)}});return C=(a=e.current)===null||a===void 0?void 0:a.patchElement(b),C&&S.push(C),{destroy:()=>{function x(){var g;(g=u.current)===null||g===void 0||g.destroy()}u.current?x():s(g=>[].concat(N(g),[x]))},update:x=>{function g(){var v;(v=u.current)===null||v===void 0||v.update(x)}u.current?g():s(v=>[].concat(N(v),[g]))},then:x=>(p=!0,f.then(x))}},[]);return[l.useMemo(()=>({info:t(pe),success:t(be),error:t(xe),warning:t(ve),confirm:t(ye)}),[]),l.createElement(Et,{key:"modal-holder",ref:e})]}var Tt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const It=e=>{const{prefixCls:n,className:s,closeIcon:t,closable:o,type:c,title:d,children:i,footer:a}=e,u=Tt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=l.useContext(_),f=r(),p=n||r("modal"),C=oe(f),[b,m,x]=re(p,C),g=`${p}-confirm`;let v={};return c?v={closable:o??!1,title:"",footer:"",children:l.createElement(fe,Object.assign({},e,{prefixCls:p,confirmPrefixCls:g,rootPrefixCls:f,content:i}))}:v={closable:o??!0,title:d,footer:a!==null&&l.createElement(ue,Object.assign({},e)),children:i},b(l.createElement(rt,Object.assign({prefixCls:p,className:w(m,`${p}-pure-panel`,c&&g,c&&`${g}-${c}`,s,x,C)},u,{closeIcon:ie(p,t),closable:o},v)))},wt=dt(It);function Oe(e){return M(ve(e))}const E=de;E.useModal=jt;E.info=function(n){return M(pe(n))};E.success=function(n){return M(be(n))};E.error=function(n){return M(xe(n))};E.warning=Oe;E.warn=Oe;E.confirm=function(n){return M(ye(n))};E.destroyAll=function(){for(;S.length;){const n=S.pop();n&&n()}};E.config=Ot;E._InternalPanelDoNotUseOrYouWillBeFired=wt;export{E as M};
