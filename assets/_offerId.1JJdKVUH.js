import{R as J,r as o,c as y,d as de,m as me,f as ue,e as j,S as pe,h as ge,k as be,o as E,j as l,u as fe,q as xe,bS as je}from"./index.B-zO2jcy.js";import{G as Y}from"./GridRow.Cw_MRkgE.js";import"./AppLayout.4kMJBK_d.js";import{L as he}from"./LayoutContainer.DB_i7kpz.js";import{d as ye,C as ve}from"./CountryName.BQMzn-nx.js";import{O as Oe,s as Z,L as $e}from"./LocationsTable.Bn4jn5tL.js";import{u as M}from"./useTranslation.B4Aad4mp.js";import{B as k}from"./Box.MGoU-yNc.js";import{C as S}from"./row.ClGDsWbn.js";import{I as ee,L as Ce}from"./LanguageName.OhKNsFKn.js";import{T as Q}from"./index.CGcGwI_R.js";import{E as te,u as Ne,C as F}from"./EyeOutlined.DZce5g_D.js";import{t as Se,u as _e,B as Ee}from"./button.BPmN1wK-.js";import{r as P,F as we}from"./renderReactiveCell.HbM7Emo9.js";import{D as X}from"./DateFormat.DYZc4s3P.js";import{T as Ie}from"./AntdIcon.BzrxpPa1.js";import"./index.BmkQiUau.js";import"./FlagIcon.Ds-_yvnp.js";import"./NumberFormat.CuYZvbUu.js";import"./index.CspahUgb.js";import"./index.BcPC7EJu.js";const Be={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},G=J.createContext({});var Pe=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const Le=e=>Se(e).map(t=>Object.assign(Object.assign({},t?.props),{key:t.key}));function Te(e,t,s){const n=o.useMemo(()=>t||Le(s),[t,s]);return o.useMemo(()=>n.map(c=>{var{span:i}=c,r=Pe(c,["span"]);return i==="filled"?Object.assign(Object.assign({},r),{filled:!0}):Object.assign(Object.assign({},r),{span:typeof i=="number"?i:te(e,i)})}),[n,e])}var Re=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};function Me(e,t){let s=[],n=[],a=!1,c=0;return e.filter(i=>i).forEach(i=>{const{filled:r}=i,m=Re(i,["filled"]);if(r){n.push(m),s.push(n),n=[],c=0;return}const g=t-c;c+=i.span||1,c>=t?(c>t?(a=!0,n.push(Object.assign(Object.assign({},m),{span:g}))):n.push(m),s.push(n),n=[],c=0):n.push(m)}),n.length>0&&s.push(n),s=s.map(i=>{const r=i.reduce((m,g)=>m+(g.span||1),0);if(r<t){const m=i[i.length-1];return m.span=t-(r-(m.span||1)),i}return i}),[s,a]}const ze=(e,t)=>{const[s,n]=o.useMemo(()=>Me(t,e),[t,e]);return s},De=({children:e})=>e;function q(e){return e!=null}const A=e=>{const{itemPrefixCls:t,component:s,span:n,className:a,style:c,labelStyle:i,contentStyle:r,bordered:m,label:g,content:u,colon:_,type:v,styles:b}=e,O=s,d=o.useContext(G),{classNames:f}=d;return m?o.createElement(O,{className:y({[`${t}-item-label`]:v==="label",[`${t}-item-content`]:v==="content",[`${f?.label}`]:v==="label",[`${f?.content}`]:v==="content"},a),style:c,colSpan:n},q(g)&&o.createElement("span",{style:Object.assign(Object.assign({},i),b?.label)},g),q(u)&&o.createElement("span",{style:Object.assign(Object.assign({},i),b?.content)},u)):o.createElement(O,{className:y(`${t}-item`,a),style:c,colSpan:n},o.createElement("div",{className:`${t}-item-container`},(g||g===0)&&o.createElement("span",{className:y(`${t}-item-label`,f?.label,{[`${t}-item-no-colon`]:!_}),style:Object.assign(Object.assign({},i),b?.label)},g),(u||u===0)&&o.createElement("span",{className:y(`${t}-item-content`,f?.content),style:Object.assign(Object.assign({},r),b?.content)},u)))};function W(e,{colon:t,prefixCls:s,bordered:n},{component:a,type:c,showLabel:i,showContent:r,labelStyle:m,contentStyle:g,styles:u}){return e.map(({label:_,children:v,prefixCls:b=s,className:O,style:d,labelStyle:f,contentStyle:p,span:R=1,key:w,styles:x},I)=>typeof a=="string"?o.createElement(A,{key:`${c}-${w||I}`,className:O,style:d,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},m),u?.label),f),x?.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},g),u?.content),p),x?.content)},span:R,colon:t,component:a,itemPrefixCls:b,bordered:n,label:i?_:null,content:r?v:null,type:c}):[o.createElement(A,{key:`label-${w||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m),u?.label),d),f),x?.label),span:1,colon:t,component:a[0],itemPrefixCls:b,bordered:n,label:_,type:"label"}),o.createElement(A,{key:`content-${w||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),u?.content),d),p),x?.content),span:R*2-1,component:a[1],itemPrefixCls:b,bordered:n,content:v,type:"content"})])}const Ae=e=>{const t=o.useContext(G),{prefixCls:s,vertical:n,row:a,index:c,bordered:i}=e;return n?o.createElement(o.Fragment,null,o.createElement("tr",{key:`label-${c}`,className:`${s}-row`},W(a,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),o.createElement("tr",{key:`content-${c}`,className:`${s}-row`},W(a,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):o.createElement("tr",{key:c,className:`${s}-row`},W(a,e,Object.assign({component:i?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},We=e=>{const{componentCls:t,labelBg:s}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${j(e.padding)} ${j(e.paddingLG)}`,borderInlineEnd:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:s,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${j(e.paddingSM)} ${j(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${j(e.paddingXS)} ${j(e.padding)}`}}}}}},Qe=e=>{const{componentCls:t,extraColor:s,itemPaddingBottom:n,itemPaddingEnd:a,colonMarginRight:c,colonMarginLeft:i,titleMarginBottom:r}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ue(e)),We(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:r},[`${t}-title`]:Object.assign(Object.assign({},pe),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:s,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:a},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${j(i)} ${j(c)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Fe=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),Ge=de("Descriptions",e=>{const t=me(e,{});return Qe(t)},Fe);var He=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const N=e=>{const{prefixCls:t,title:s,extra:n,column:a,colon:c=!0,bordered:i,layout:r,children:m,className:g,rootClassName:u,style:_,size:v,labelStyle:b,contentStyle:O,styles:d,items:f,classNames:p}=e,R=He(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:w,direction:x,className:I,style:ne,classNames:$,styles:C}=ge("descriptions"),h=w("descriptions",t),z=Ne(),se=o.useMemo(()=>{var B;return typeof a=="number"?a:(B=te(z,Object.assign(Object.assign({},Be),a)))!==null&&B!==void 0?B:3},[z,a]),ae=Te(z,f,m),D=_e(v),le=ze(se,ae),[re,oe,ie]=Ge(h),ce=o.useMemo(()=>({labelStyle:b,contentStyle:O,styles:{content:Object.assign(Object.assign({},C.content),d?.content),label:Object.assign(Object.assign({},C.label),d?.label)},classNames:{label:y($.label,p?.label),content:y($.content,p?.content)}}),[b,O,d,p,$,C]);return re(o.createElement(G.Provider,{value:ce},o.createElement("div",Object.assign({className:y(h,I,$.root,p?.root,{[`${h}-${D}`]:D&&D!=="default",[`${h}-bordered`]:!!i,[`${h}-rtl`]:x==="rtl"},g,u,oe,ie),style:Object.assign(Object.assign(Object.assign(Object.assign({},ne),C.root),d?.root),_)},R),(s||n)&&o.createElement("div",{className:y(`${h}-header`,$.header,p?.header),style:Object.assign(Object.assign({},C.header),d?.header)},s&&o.createElement("div",{className:y(`${h}-title`,$.title,p?.title),style:Object.assign(Object.assign({},C.title),d?.title)},s),n&&o.createElement("div",{className:y(`${h}-extra`,$.extra,p?.extra),style:Object.assign(Object.assign({},C.extra),d?.extra)},n)),o.createElement("div",{className:`${h}-view`},o.createElement("table",null,o.createElement("tbody",null,le.map((B,H)=>o.createElement(Ae,{key:H,index:H,colon:c,prefixCls:h,vertical:r==="vertical",bordered:i,row:B}))))))))};N.Item=De;var Xe=Object.defineProperty,qe=(e,t,s)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,V=(e,t,s)=>qe(e,typeof t!="symbol"?t+"":t,s);class Ve{constructor(t,s){V(this,"offerQuery"),V(this,"categoriesQuery"),this.categoriesQuery=new ye(t),this.offerQuery=new Oe(t,this.categoriesQuery,s),be(this,{},{autoBind:!0})}dispose(){console.log("dispose")}init(){console.log("init")}}const Ue=o.createContext(null),Ke="_image_jqetl_1",Je="_tags_jqetl_5",U={image:Ke,tags:Je},Ye=E(function({offerQuery:t}){const{t:s,locale:n}=M("offer"),a=t.store.offer,c=t.store.category;return l.jsxs(Y,{vGutter:12,children:[l.jsx(S,{xs:24,sm:10,md:10,lg:10,xl:11,xxl:12,children:l.jsx(ee,{className:U.image,src:a.image,alt:a.title})}),l.jsxs(S,{xs:24,sm:14,md:14,lg:14,xl:13,xxl:12,children:[l.jsxs(k,{className:U.tags,children:[a.isTopOffer&&l.jsx(Q,{color:"blue",children:s("status.isTopOffer")}),a.isExclusive&&l.jsx(Q,{color:"purple",children:s("status.isExclusive")})]}),l.jsxs(N,{layout:"horizontal",children:[l.jsx(N.Item,{span:"filled",label:s("page.vertical"),children:s(`vertical.${a.vertical}`)}),l.jsx(N.Item,{span:"filled",label:s("page.category"),children:n.code==="ru"?c.nameRu:c.nameEn}),l.jsx(N.Item,{span:"filled",label:s("page.description"),children:a.subtitle}),l.jsx(N.Item,{span:"filled",label:"CR",children:a.cr}),l.jsx(N.Item,{span:"filled",label:s("page.approve"),children:a.approve})]})]}),l.jsxs(S,{xs:24,children:[l.jsxs("h5",{children:[s("page.rules"),":"]}),l.jsx("p",{children:a.rules})]})]})}),Ze=E(function({offerQuery:t}){const{t:s}=M("offer"),n=t.store.offer;return l.jsx(F,{title:`${s("page.offer")}: ${n.title}`,extra:l.jsx(l.Fragment,{children:l.jsx(Ee,{type:"primary",children:"Подключить оффер"})}),children:l.jsx(Ye,{offerQuery:t})})}),ke="_card_42l30_1",et="_card_body_42l30_5",tt="_table_42l30_9",nt="_image_42l30_34",st="_secondary_42l30_38",T={card:ke,card_body:et,table:tt,image:nt,secondary:st},at={body:T.card_body},K=E(function({type:t,offerQuery:s}){const{t:n}=M("offer");return l.jsx(F,{title:`${n(`page.${t}`)}`,className:T.card,classNames:at,children:l.jsx(lt,{offerQuery:s,type:t})})}),lt=E(function({type:t,offerQuery:s}){const n=t==="landing"?s.store.landings:s.store.transits,a=s.store.locations,c=o.useMemo(()=>[{title:"Изображение",render:P(({domain:r})=>l.jsx(k,{gap:"xs",align:"center",justify:"start",onClick:m=>m.stopPropagation(),children:l.jsx(ee,{className:T.image,src:r.image,alt:r.title})}))},{title:"Гео",render:P(({location:r})=>l.jsx(ve,{code:r.countryCode}))},{title:"Языки",render:P(({domain:r})=>{const m=r.languages.map((g,u)=>l.jsxs(J.Fragment,{children:[l.jsx(Ce,{code:g}),u<r.languages.length-1&&l.jsx("br",{})]},g));return r.languages.length>4?l.jsx(Ie,{overlay:m,children:l.jsxs(Q,{children:[" ",r.languages.length," "]})}):m})},{title:"CR",render:P(({domain:r})=>r.cr)},{title:"Обновлён",render:P(({domain:r})=>l.jsxs(l.Fragment,{children:[l.jsx(X,{value:r.updatedAt||r.createdAt,dateStyle:"short"}),l.jsx("br",{}),l.jsx("span",{className:T.secondary,children:l.jsx(X,{value:r.updatedAt||r.createdAt,timeStyle:"short"})})]}))}],[]),i=n.map(r=>{const m=a.find(g=>g.id===r.id)||a[0];return{id:r.id,location:m,domain:r}});return l.jsx(we,{rowKey:"id",columns:c,pagination:!1,dataSource:i,className:T.table})}),rt={body:Z.card_body},ot=E(function({offerQuery:t}){const{t:s}=M("offer");return l.jsx(F,{classNames:rt,className:Z.card,title:`${s("page.geo")}`,children:l.jsx($e,{offerQuery:t})})}),it="_section_1cu6l_1",L={section:it},ct=E(function({offerId:t}){const s=fe(),n=xe(()=>new Ve(s,t),[s,t]);return l.jsx(Ue.Provider,{value:n,children:l.jsx(he,{className:L.container,children:l.jsxs(Y,{children:[l.jsx(S,{xs:24,xxl:12,className:L.section,children:l.jsx(Ze,{offerQuery:n.offerQuery})}),l.jsx(S,{xs:24,xxl:12,className:L.section,children:l.jsx(ot,{offerQuery:n.offerQuery})}),l.jsx(S,{xs:24,xxl:12,className:L.section,children:l.jsx(K,{offerQuery:n.offerQuery,type:"landing"})}),l.jsx(S,{xs:24,xxl:12,className:L.section,children:l.jsx(K,{offerQuery:n.offerQuery,type:"transit"})})]})})})}),Bt=()=>{const e=je.useParams();return l.jsx(ct,{offerId:e.offerId})};export{Bt as component};
