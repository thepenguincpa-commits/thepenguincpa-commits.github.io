import{e as he,m as ge,h as pe,f as $,i as ve,r as l,d as K,P as q,Q as Ee,S as Be,T as J,V as be,W as He,_ as U,X as Q,Y as ye,Z as Fe,$ as De,a0 as Te,I as xe,A as Ae,D as L,E as X,F as We,n as Ve,o as Se,j as o,L as Le,u as qe}from"./index.D0ZL9dlq.js";import{c as Ke,e as Ge,T as Qe,u as Xe}from"./useStore.rIWB3VHp.js";import{a as Je}from"./LayoutContainer.D5vzTIRK.js";import{O as Ue,a as Ye,b as Ze,c as ke,d as et,e as tt,o as at,C as rt,B as se}from"./CountryName.CgLtou_u.js";import{R as ot}from"./Registry.DDXooKn4.js";import{I as nt}from"./InfiniteQueryWithState.BoCUIaXG.js";import{O as it}from"./OfferCategoryName.BvQR0h8I.js";import{r as k,F as st}from"./renderReactiveCell.B_zzU_Pl.js";import{F as lt,C as ee}from"./FlagIcon.DW-Y8Ccx.js";import{N as ct}from"./NumberFormat.DxvU6q7R.js";import{C as $e,b as dt}from"./EyeOutlined.BTRVFJFJ.js";import{R as ut}from"./GlobalOutlined.Ckb97KiW.js";import{u as Ce,o as mt,B as te}from"./button.OEP3CgYZ.js";import{I as ft}from"./index.MgSLeBeq.js";import{a as le}from"./QueryWithState.BPq9GHGk.js";import"./index.ClGRLJ6f.js";import"./index.qEyMnBBk.js";const ht=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{[`&${t}`]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},gt=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:r,colorSplit:a,lineWidth:n,textPaddingInline:c,orientationMargin:u,verticalMarginInline:m}=e;return{[t]:Object.assign(Object.assign({},pe(e)),{borderBlockStart:`${$(n)} solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:m,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${$(n)} solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${$(e.marginLG)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${$(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${$(n)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${u} * 100%)`},"&::after":{width:`calc(100% - ${u} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${u} * 100%)`},"&::after":{width:`calc(${u} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:c},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${$(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:a,borderStyle:"dotted",borderWidth:`${$(n)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:n,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:r}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:r}}})}},pt=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),vt=he("Divider",e=>{const t=ge(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[gt(t),ht(t)]},pt,{unitless:{orientationMargin:!0}});var bt=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};const yt={small:"sm",middle:"md"},we=e=>{const{getPrefixCls:t,direction:r,className:a,style:n}=ve("divider"),{prefixCls:c,type:u="horizontal",orientation:m="center",orientationMargin:f,className:y,rootClassName:i,children:s,dashed:O,variant:x="solid",plain:S,style:N,size:R}=e,E=bt(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),d=t("divider",c),[g,I,W]=vt(d),C=Ce(R),h=yt[C],P=!!s,w=l.useMemo(()=>m==="left"?r==="rtl"?"end":"start":m==="right"?r==="rtl"?"start":"end":m,[r,m]),_=w==="start"&&f!=null,D=w==="end"&&f!=null,B=K(d,a,I,W,`${d}-${u}`,{[`${d}-with-text`]:P,[`${d}-with-text-${w}`]:P,[`${d}-dashed`]:!!O,[`${d}-${x}`]:x!=="solid",[`${d}-plain`]:!!S,[`${d}-rtl`]:r==="rtl",[`${d}-no-default-orientation-margin-start`]:_,[`${d}-no-default-orientation-margin-end`]:D,[`${d}-${h}`]:!!h},y,i),T=l.useMemo(()=>typeof f=="number"?f:/^\d+$/.test(f)?Number(f):f,[f]),p={marginInlineStart:_?T:void 0,marginInlineEnd:D?T:void 0};return g(l.createElement("div",Object.assign({className:B,style:Object.assign(Object.assign({},n),N)},E,{role:"separator"}),s&&u!=="vertical"&&l.createElement("span",{className:`${d}-inner-text`,style:p},s)))};var ce=function(t,r){if(!t)return null;var a={left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth,top:t.offsetTop,bottom:t.parentElement.clientHeight-t.clientHeight-t.offsetTop,height:t.clientHeight};return r?{left:0,right:0,width:0,top:a.top,bottom:a.bottom,height:a.height}:{left:a.left,right:a.right,width:a.width,top:0,bottom:0,height:0}},M=function(t){return t!==void 0?"".concat(t,"px"):void 0};function xt(e){var t=e.prefixCls,r=e.containerRef,a=e.value,n=e.getValueIndex,c=e.motionName,u=e.onMotionStart,m=e.onMotionEnd,f=e.direction,y=e.vertical,i=y===void 0?!1:y,s=l.useRef(null),O=l.useState(a),x=q(O,2),S=x[0],N=x[1],R=function(A){var H,V=n(A),F=(H=r.current)===null||H===void 0?void 0:H.querySelectorAll(".".concat(t,"-item"))[V];return F?.offsetParent&&F},E=l.useState(null),d=q(E,2),g=d[0],I=d[1],W=l.useState(null),C=q(W,2),h=C[0],P=C[1];Ee(function(){if(S!==a){var p=R(S),A=R(a),H=ce(p,i),V=ce(A,i);N(a),I(H),P(V),p&&A?u():m()}},[a]);var w=l.useMemo(function(){if(i){var p;return M((p=g?.top)!==null&&p!==void 0?p:0)}return M(f==="rtl"?-g?.right:g?.left)},[i,f,g]),_=l.useMemo(function(){if(i){var p;return M((p=h?.top)!==null&&p!==void 0?p:0)}return M(f==="rtl"?-h?.right:h?.left)},[i,f,h]),D=function(){return i?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},B=function(){return i?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},T=function(){I(null),P(null),m()};return!g||!h?null:l.createElement(Be,{visible:!0,motionName:c,motionAppear:!0,onAppearStart:D,onAppearActive:B,onVisibleChanged:T},function(p,A){var H=p.className,V=p.style,F=J(J({},V),{},{"--thumb-start-left":w,"--thumb-start-width":M(g?.width),"--thumb-active-left":_,"--thumb-active-width":M(h?.width),"--thumb-start-top":w,"--thumb-start-height":M(g?.height),"--thumb-active-top":_,"--thumb-active-height":M(h?.height)}),Y={ref:be(s,A),style:F,className:K("".concat(t,"-thumb"),H)};return l.createElement("div",Y)})}var St=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"];function $t(e){if(typeof e.title<"u")return e.title;if(ye(e.label)!=="object"){var t;return(t=e.label)===null||t===void 0?void 0:t.toString()}}function Ct(e){return e.map(function(t){if(ye(t)==="object"&&t!==null){var r=$t(t);return J(J({},t),{},{title:r})}return{label:t?.toString(),title:t?.toString(),value:t}})}var wt=function(t){var r=t.prefixCls,a=t.className,n=t.disabled,c=t.checked,u=t.label,m=t.title,f=t.value,y=t.name,i=t.onChange,s=t.onFocus,O=t.onBlur,x=t.onKeyDown,S=t.onKeyUp,N=t.onMouseDown,R=function(d){n||i(d,f)};return l.createElement("label",{className:K(a,Q({},"".concat(r,"-item-disabled"),n)),onMouseDown:N},l.createElement("input",{name:y,className:"".concat(r,"-item-input"),type:"radio",disabled:n,checked:c,onChange:R,onFocus:s,onBlur:O,onKeyDown:x,onKeyUp:S}),l.createElement("div",{className:"".concat(r,"-item-label"),title:m,"aria-selected":c},u))},_t=l.forwardRef(function(e,t){var r,a,n=e.prefixCls,c=n===void 0?"rc-segmented":n,u=e.direction,m=e.vertical,f=e.options,y=f===void 0?[]:f,i=e.disabled,s=e.defaultValue,O=e.value,x=e.name,S=e.onChange,N=e.className,R=N===void 0?"":N,E=e.motionName,d=E===void 0?"thumb-motion":E,g=He(e,St),I=l.useRef(null),W=l.useMemo(function(){return be(I,t)},[I,t]),C=l.useMemo(function(){return Ct(y)},[y]),h=Ke((r=C[0])===null||r===void 0?void 0:r.value,{value:O,defaultValue:s}),P=q(h,2),w=P[0],_=P[1],D=l.useState(!1),B=q(D,2),T=B[0],p=B[1],A=function(j,G){_(G),S?.(G)},H=mt(g,["children"]),V=l.useState(!1),F=q(V,2),Y=F[0],ae=F[1],_e=l.useState(!1),re=q(_e,2),je=re[0],oe=re[1],Oe=function(){oe(!0)},Ne=function(){oe(!1)},Re=function(){ae(!1)},Ie=function(j){j.key==="Tab"&&ae(!0)},ne=function(j){var G=C.findIndex(function(ze){return ze.value===w}),ie=C.length,Me=(G+j+ie)%ie,Z=C[Me];Z&&(_(Z.value),S?.(Z.value))},Pe=function(j){switch(j.key){case"ArrowLeft":case"ArrowUp":ne(-1);break;case"ArrowRight":case"ArrowDown":ne(1);break}};return l.createElement("div",U({role:"radiogroup","aria-label":"segmented control",tabIndex:i?void 0:0},H,{className:K(c,(a={},Q(a,"".concat(c,"-rtl"),u==="rtl"),Q(a,"".concat(c,"-disabled"),i),Q(a,"".concat(c,"-vertical"),m),a),R),ref:W}),l.createElement("div",{className:"".concat(c,"-group")},l.createElement(xt,{vertical:m,prefixCls:c,value:w,containerRef:I,motionName:"".concat(c,"-").concat(d),direction:u,getValueIndex:function(j){return C.findIndex(function(G){return G.value===j})},onMotionStart:function(){p(!0)},onMotionEnd:function(){p(!1)}}),C.map(function(b){var j;return l.createElement(wt,U({},b,{name:x,key:b.value,prefixCls:c,className:K(b.className,"".concat(c,"-item"),(j={},Q(j,"".concat(c,"-item-selected"),b.value===w&&!T),Q(j,"".concat(c,"-item-focused"),je&&Y&&b.value===w),j)),checked:b.value===w,onChange:A,onFocus:Oe,onBlur:Ne,onKeyDown:Pe,onKeyUp:Ie,onMouseDown:Re,disabled:!!i||!!b.disabled}))})))}),jt=_t;function de(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function ue(e){return{backgroundColor:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const Ot=Object.assign({overflow:"hidden"},Te),Nt=e=>{const{componentCls:t}=e,r=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),a=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),n=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pe(e)),{display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`}),Fe(e)),{[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-vertical`]:{[`${t}-group`]:{flexDirection:"column"},[`${t}-thumb`]:{width:"100%",height:0,padding:`0 ${$(e.paddingXXS)}`}},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},ue(e)),{color:e.itemSelectedColor}),"&-focused":De(e),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:r,lineHeight:$(r),padding:`0 ${$(e.segmentedPaddingHorizontal)}`},Ot),"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},ue(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${$(e.paddingXXS)} 0`,borderRadius:e.borderRadiusSM,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, height ${e.motionDurationSlow} ${e.motionEaseInOut}`,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:a,lineHeight:$(a),padding:`0 ${$(e.segmentedPaddingHorizontal)}`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:n,lineHeight:$(n),padding:`0 ${$(e.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),de(`&-disabled ${t}-item`,e)),de(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"},[`&${t}-shape-round`]:{borderRadius:9999,[`${t}-item, ${t}-thumb`]:{borderRadius:9999}}})}},Rt=e=>{const{colorTextLabel:t,colorText:r,colorFillSecondary:a,colorBgElevated:n,colorFill:c,lineWidthBold:u,colorBgLayout:m}=e;return{trackPadding:u,trackBg:m,itemColor:t,itemHoverColor:r,itemHoverBg:a,itemSelectedBg:n,itemActiveBg:c,itemSelectedColor:r}},It=he("Segmented",e=>{const{lineWidth:t,calc:r}=e,a=ge(e,{segmentedPaddingHorizontal:r(e.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:r(e.controlPaddingHorizontalSM).sub(t).equal()});return Nt(a)},Rt);var me=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};function Pt(e){return typeof e=="object"&&!!e?.icon}const Mt=l.forwardRef((e,t)=>{const r=Ge(),{prefixCls:a,className:n,rootClassName:c,block:u,options:m=[],size:f="middle",style:y,vertical:i,shape:s="default",name:O=r}=e,x=me(e,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:S,direction:N,className:R,style:E}=ve("segmented"),d=S("segmented",a),[g,I,W]=It(d),C=Ce(f),h=l.useMemo(()=>m.map(_=>{if(Pt(_)){const{icon:D,label:B}=_,T=me(_,["icon","label"]);return Object.assign(Object.assign({},T),{label:l.createElement(l.Fragment,null,l.createElement("span",{className:`${d}-item-icon`},D),B&&l.createElement("span",null,B))})}return _}),[m,d]),P=K(n,c,R,{[`${d}-block`]:u,[`${d}-sm`]:C==="small",[`${d}-lg`]:C==="large",[`${d}-vertical`]:i,[`${d}-shape-${s}`]:s==="round"},I,W),w=Object.assign(Object.assign({},E),y);return g(l.createElement(jt,Object.assign({},x,{name:O,className:P,style:w,options:h,ref:t,prefixCls:d,direction:N,vertical:i})))}),zt=Mt;var Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},Bt=function(t,r){return l.createElement(xe,U({},t,{ref:r,icon:Et}))},Ht=l.forwardRef(Bt),Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},Dt=function(t,r){return l.createElement(xe,U({},t,{ref:r,icon:Ft}))},Tt=l.forwardRef(Dt),At=Object.defineProperty,Wt=(e,t,r)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vt=(e,t,r)=>Wt(e,t+"",r);class Lt{constructor(t,r,a){this.appContext=t,this.categoriesQuery=r,this.currentItem=a,Vt(this,"data"),this.data=this.parseData(a),Ae(this,{data:We.ref,offer:L,category:L,locations:L({equals:X.shallow}),basePayouts:L({equals:X.shallow}),personalPayouts:L({equals:X.shallow}),domains:L({equals:X.shallow}),repositories:L({equals:X.shallow})})}parseData({locations:t,basePayouts:r,personalPayouts:a,domains:n,...c}){const u=this.appContext.repositories.get(Ue),m=this.appContext.repositories.get(Ye),f=this.appContext.repositories.get(Ze),y=this.appContext.repositories.get(ke),i=this.appContext.repositories.get(et);return{offer:u.get(c.id).updateFromJson({...c,locations:t.map(s=>s.id),basePayouts:r.map(s=>s.id),personalPayouts:a.map(s=>s.id),domains:n.map(s=>s.id)}),locations:t.map(s=>m.get(s.id).updateFromJson(s)),basePayouts:r.map(s=>f.get(s.id).updateFromJson(s)),personalPayouts:a.map(s=>y.get(s.id).updateFromJson(s)),domains:n.map(s=>i.get(s.id).updateFromJson(s)),offerRepository:u,locationRepository:m,personalPayoutRepository:y,basePayoutRepository:f,domainRepository:i}}get repositories(){return{offer:this.data.offerRepository,locations:this.data.locationRepository,domains:this.data.domainRepository,personalPayouts:this.data.personalPayoutRepository,basePayouts:this.data.basePayoutRepository,categories:this.categoriesQuery.repository}}updateFromJson(t){t!==this.currentItem&&(this.data=this.parseData(t))}get offer(){return this.data.offer}get category(){return this.categoriesQuery.repository.get(this.offer.category)}get locations(){return this.data.locations}get basePayouts(){return this.data.basePayouts}get personalPayouts(){return this.data.personalPayouts}get domains(){return this.data.domains}}var qt=Object.defineProperty,Kt=(e,t,r)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fe=(e,t,r)=>Kt(e,typeof t!="symbol"?t+"":t,r);class Gt{constructor(t){fe(this,"offersQuery"),fe(this,"categoriesQuery"),Ve(this),this.categoriesQuery=new tt(t);const r=new WeakMap;this.offersQuery=new nt(t.queryClient,{queryKey:["webmaster","offers"],queryFn:()=>at.offersGet({offset:0,limit:20}),getNextPageParam:(a,n)=>{const c=n.reduce((u,m)=>u+m.items.length,0);if(!(c>=a.total))return c},initialPageParam:0,transform:({pages:a}={pageParams:[],pages:[]})=>({data:a.flatMap(c=>{let u=r.get(c);return u||(u=new ot(m=>new Lt(t,this.categoriesQuery,m))),u.from(c.items)}),total:(a[a.length-1]||{total:0}).total}),staleTime:1e3*60*5,refetchOnWindowFocus:!0})}get offers(){return this.offersQuery.data.data}get totalOffers(){return this.offersQuery.data.total}dispose(){console.log("dispose")}init(){console.log("init")}}const Qt="_card_7rx0a_1",Xt="_header_7rx0a_6",Jt="_logo_7rx0a_13",Ut="_info_7rx0a_21",Yt="_title_7rx0a_26",Zt="_subtitle_7rx0a_30",kt="_meta_7rx0a_34",ea="_langCount_7rx0a_46",ta="_langIcon_7rx0a_51",aa="_table_7rx0a_55",ra="_footer_7rx0a_59",oa="_plus_7rx0a_64",na="_countryCell_7rx0a_68",ia="_payoutModified_7rx0a_75",sa="_payoutCell_7rx0a_81",la="_priceCell_7rx0a_85",v={card:Qt,header:Xt,logo:Jt,info:Ut,title:Yt,subtitle:Zt,meta:kt,langCount:ea,langIcon:ta,table:aa,footer:ra,plus:oa,countryCell:na,payoutModified:ia,payoutCell:sa,priceCell:la},ca=Se(function({item:t}){const{offer:r,category:a,basePayouts:n,locations:c,personalPayouts:u}=t,m=r.domains?.length||0,f=l.useMemo(()=>[{title:"Страна",dataIndex:"country",key:"country",width:"100%",render:k(({location:i})=>o.jsxs("div",{className:v.countryCell,children:[o.jsx(lt,{code:i.countryCode}),o.jsx(rt,{code:i.countryCode})]}))},{title:"Выпл. $",dataIndex:"payout",key:"payout",render:k(({payout:i,basePayout:s})=>i?o.jsx(Qe,{overlay:`Специальные условия: ${o.jsx(ct,{signDisplay:"always",value:i.amount-s.amount})}`,children:o.jsx("div",{className:K(v.payoutCell,v.payoutModified),children:o.jsx(ee,{code:i.currency,value:i.amount})})}):o.jsx("div",{className:v.payoutCell,children:o.jsx(ee,{code:s.currency,value:s.amount})}))},{title:"На сайте",dataIndex:"sitePrice",key:"sitePrice",render:k(({location:i})=>o.jsx("div",{className:v.priceCell,children:o.jsx(ee,{code:i.currency,value:i.price})}))}],[]),y=c.map(i=>{const s=n.find(x=>x.location===i.id)||n[0],O=u.find(x=>x.location===i.id);return{id:i.id,location:i,basePayout:s,payout:O}});return o.jsx(Le,{to:"/offers/$offerId",params:{offerId:r.id},children:o.jsxs($e,{hoverable:!0,className:v.card,children:[o.jsxs("div",{className:v.header,children:[o.jsx("img",{src:r.image,alt:r.title,className:v.logo}),o.jsxs("div",{className:v.info,children:[o.jsx("h4",{className:v.title,children:r.title}),o.jsx("span",{className:v.subtitle,children:r.subtitle})]}),o.jsxs("div",{className:v.meta,children:[o.jsx("span",{children:"Категория: "}),o.jsx("span",{className:v.category,children:o.jsx(it,{category:a})}),o.jsx("br",{}),o.jsxs("span",{children:[m," ",o.jsx("span",{className:v.langCount,children:"языков"})," ",o.jsx(ut,{className:v.langIcon})]})]})]}),o.jsx(we,{}),o.jsx(st,{rowKey:"id",columns:f,dataSource:y,pagination:!1,size:"small",className:v.table}),o.jsx("div",{className:v.footer,children:o.jsxs(te,{type:"primary",children:["Подключить оффер ",o.jsx("span",{className:v.plus,children:"+"})]})})]})})}),da="_filterCard_aszee_1",ua="_header_aszee_5",ma="_title_aszee_12",fa="_count_aszee_18",ha="_countGray_aszee_23",ga="_search_aszee_28",pa="_filtersRow_aszee_34",va="_select_aszee_42",z={filterCard:da,header:ua,title:ma,count:fa,countGray:ha,search:ga,filtersRow:pa,select:va},ba=[{label:"Категория",value:"all"}],ya=[{label:"Гео",value:"all"}],xa=()=>o.jsxs($e,{className:z.filterCard,children:[o.jsxs("div",{className:z.header,children:[o.jsx("span",{className:z.title,children:"Офферы"}),o.jsx(zt,{options:[{label:o.jsxs(o.Fragment,{children:["Все ",o.jsx("span",{className:z.count,children:"102"})]}),value:"all"},{label:o.jsxs(o.Fragment,{children:["Мои ",o.jsx("span",{className:z.countGray,children:"19"})]}),value:"my"}],defaultValue:"all",className:z.segmented}),o.jsx(ft,{placeholder:"Поиск по офферам",prefix:o.jsx(dt,{}),className:z.search})]}),o.jsx(we,{}),o.jsxs("div",{className:z.filtersRow,children:[o.jsxs(se,{gap:"sm",children:[o.jsx(le,{options:ba,defaultValue:"all",className:z.select}),o.jsx(le,{options:ya,defaultValue:"all",className:z.select})]}),o.jsxs(se,{gap:"sm",children:[o.jsxs(te,{type:"primary",children:["Применить фильтр ",o.jsx(Tt,{})]}),o.jsx(te,{icon:o.jsx(Ht,{})})]})]})]}),Sa=Se(function(){const t=qe(),a=Xe(()=>new Gt(t),[t]).offers;return o.jsxs(Je,{size:"lg",children:[o.jsx(xa,{}),a.map(n=>o.jsx(ca,{item:n},n.offer.id))]})}),Ta=Sa;export{Ta as component};
