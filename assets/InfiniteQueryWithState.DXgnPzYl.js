import{Q as p,H as l,K as v,L as q,M as m,N as b,t as x,e as t}from"./index.WsYO2dy-.js";var F=class extends p{constructor(r,e){super(r,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(r){super.setOptions({...r,behavior:l()})}getOptimisticResult(r){return r.behavior=l(),super.getOptimisticResult(r)}fetchNextPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"backward"}}})}createResult(r,e){const{state:i}=r,s=super.createResult(r,e),{isFetching:a,isRefetching:o,isError:n,isRefetchError:u}=s,h=i.fetchMeta?.fetchMore?.direction,c=n&&h==="forward",f=a&&h==="forward",d=n&&h==="backward",P=a&&h==="backward";return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:q(e,i.data),hasPreviousPage:v(e,i.data),isFetchNextPageError:c,isFetchingNextPage:f,isFetchPreviousPageError:d,isFetchingPreviousPage:P,isRefetchError:u&&!c&&!d,isRefetching:o&&!f&&!P}}};function g(r,e){return{...r,refetch:async i=>{const s=await r.refetch(i);return{...s,data:e(s.data)}},data:e(r.data)}}function R(r){let e={};function i(a,o){const n=r();Promise.resolve().then(()=>{n?e.data===o.data&&e.transform===n?a(g(o,()=>e.transformData)):(e.data=o.data,e.transform=n,e.transformData=n(o.data),a(g(o,()=>e.transformData))):a(o)})}function s(){e={}}return{cleanup:s,execute:i}}var N=Object.defineProperty,O=(r,e,i)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,y=(r,e,i)=>O(r,typeof e!="symbol"?e+"":e,i);class M{constructor(e,i){this.client=e,this.options=i,y(this,"resource"),y(this,"observer"),this.observer=new F(e,this.getDefaultedOptions());let s=()=>{};const a=R(()=>this.options.transform),o=this.observer.getCurrentResult(),n=g(o,u=>this.options.transform?this.options.transform(u):u);this.resource=m(u=>{const h=this.observer.getOptimisticResult(this.getDefaultedOptions());a.execute(u,h),s=this.observer.subscribe(b.batchCalls(c=>{c.error&&this.options.onError?.(c.error),a.execute(u,c)})),this.observer.updateResult()},()=>{a.cleanup(),s()},n),x(this,{data:t,dataUpdatedAt:t,error:t,isError:t,isPending:t,isLoadingError:t,isRefetchError:t,isSuccess:t,status:t,errorUpdateCount:t,errorUpdatedAt:t,failureCount:t,failureReason:t,fetchStatus:t,isFetched:t,isFetchedAfterMount:t,isFetching:t,isLoading:t,isPaused:t,isPlaceholderData:t,isRefetching:t,isStale:t,hasNextPage:t,hasPreviousPage:t,isFetchNextPageError:t,isFetchingNextPage:t,isFetchPreviousPageError:t,isFetchingPreviousPage:t})}getDefaultedOptions(){const{transform:e,...i}=this.options,s=this.client.defaultQueryOptions(i),a=s.staleTime;if(s.suspense){const o=n=>typeof n=="number"?Math.max(n,1e3):1e3;s.staleTime=typeof a=="function"?(...n)=>o(a(...n)):Math.max(o(a),1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}return this.client.getQueryCache().get(s.queryHash),s}get queryKey(){return this.options.queryKey}setQueryData(e){this.client.setQueryData(this.queryKey,e,{updatedAt:this.query.dataUpdatedAt})}invalidate(){this.client.invalidateQueries({queryKey:this.queryKey.slice(0,1)})}setOptions(e){this.options=e,this.observer.setOptions(this.getDefaultedOptions())}updateOptions(e){this.options={...this.options,...e};const i=this.getDefaultedOptions();this.observer.setOptions(i)}get query(){return this.resource.current()}get data(){return this.query.data}get dataUpdatedAt(){return this.query.dataUpdatedAt}get error(){return this.query.error}get isError(){return this.query.isError}get isPending(){return this.query.isPending}get isLoadingError(){return this.query.isLoadingError}get isRefetchError(){return this.query.isRefetchError}get isSuccess(){return this.query.isSuccess}get status(){return this.query.status}get errorUpdateCount(){return this.query.errorUpdateCount}get errorUpdatedAt(){return this.query.errorUpdatedAt}get failureCount(){return this.query.failureCount}get failureReason(){return this.query.failureReason}get fetchStatus(){return this.query.fetchStatus}get isFetched(){return this.query.isFetched}get isFetchedAfterMount(){return this.query.isFetchedAfterMount}get isFetching(){return this.query.isFetching}get isLoading(){return this.query.isLoading}get isPaused(){return this.query.isPaused}get isPlaceholderData(){return this.query.isPlaceholderData}get isRefetching(){return this.query.isRefetching}get isStale(){return this.query.isStale}get hasNextPage(){return this.query.hasNextPage}get hasPreviousPage(){return this.query.hasPreviousPage}get isFetchNextPageError(){return this.query.isFetchNextPageError}get isFetchingNextPage(){return this.query.isFetchingNextPage}get isFetchPreviousPageError(){return this.query.isFetchPreviousPageError}get isFetchingPreviousPage(){return this.query.isFetchingPreviousPage}async fetchNextPage(e){await this.query.fetchNextPage(e)}async fetchPreviousPage(e){await this.query.fetchPreviousPage(e)}async refetch(e){await this.query.refetch(e)}}export{M as I};
