import{t as g,j as r,k as y,o as d,u as m,a1 as f,aD as _}from"./index.WsYO2dy-.js";import{c as n,e as S,a as k,b as l,r as c,m as v,n as b,V as w}from"./validators.Dv5Q2cT2.js";import{u as p}from"./useTranslation.D4fSpiLe.js";import{I as i}from"./index.BtpR5D5L.js";import{B as h}from"./button.B3PsbA3S.js";import{C as L}from"./CheckboxControl.APbzGKG_.js";import{C as F}from"./index.DLZ010Vy.js";import{R as I}from"./BulbOutlined.BFaxNoHf.js";import{T as M}from"./AntdIcon.vojNxC2w.js";import{C as T}from"./Input.CS61qdQu.js";import{T as B}from"./index.VPhH3OGS.js";import"./row.C2dg1pTq.js";import"./EyeOutlined.ugoREuIH.js";import"./index.OfYrEZhQ.js";var E=Object.defineProperty,N=(o,e,s)=>e in o?E(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,A=(o,e,s)=>N(o,e+"",s);class ${constructor(){A(this,"mode","login"),g(this,{},{autoBind:!0})}toLogin(){this.mode="login"}toRegister(){this.mode="register"}toForgot(){this.mode="forgot"}}const R=()=>r.jsxs("svg",{color:"rgba(52, 109, 219, 1)",version:"1.1",preserveAspectRatio:"none",viewBox:"0 0 1440 530",children:[r.jsxs("g",{mask:'url("#SvgjsMask1018")',fill:"none",children:[r.jsx("use",{href:"#SvgjsSymbol1025",x:"0",y:"0"}),r.jsx("use",{href:"#SvgjsSymbol1025",x:"720",y:"0"})]}),r.jsxs("defs",{children:[r.jsx("mask",{id:"SvgjsMask1018",children:r.jsx("rect",{width:"1440",height:"560",fill:"#ffffff"})}),r.jsx("path",{d:"M-1 0 a1 1 0 1 0 2 0 a1 1 0 1 0 -2 0z",id:"SvgjsPath1022"}),r.jsx("path",{d:"M-3 0 a3 3 0 1 0 6 0 a3 3 0 1 0 -6 0z",id:"SvgjsPath1020"}),r.jsx("path",{d:"M-5 0 a5 5 0 1 0 10 0 a5 5 0 1 0 -10 0z",id:"SvgjsPath1023"}),r.jsx("path",{d:"M2 -2 L-2 2z",id:"SvgjsPath1019"}),r.jsx("path",{d:"M6 -6 L-6 6z",id:"SvgjsPath1021"}),r.jsx("path",{d:"M30 -30 L-30 30z",id:"SvgjsPath1024"})]}),r.jsxs("symbol",{id:"SvgjsSymbol1025",children:[r.jsx("use",{href:"#SvgjsPath1019",x:"30",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"30",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"30",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"30",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"30",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"30",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"30",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"30",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"30",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"90",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"90",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"90",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"90",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"90",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"90",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"90",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"90",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"90",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"150",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"150",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"150",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"150",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"150",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"150",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"150",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"150",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"150",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"210",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"210",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"210",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"210",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"210",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"210",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"210",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"210",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"210",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"270",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"270",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"270",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"270",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"270",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"270",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"270",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"270",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"270",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"330",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"330",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"330",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1024",x:"330",y:"210",stroke:"currentColor",strokeWidth:"3"}),r.jsx("use",{href:"#SvgjsPath1019",x:"330",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"330",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"330",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"330",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"330",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"390",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"390",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"390",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"390",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"390",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"390",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"390",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"390",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"390",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"450",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1024",x:"450",y:"90",stroke:"currentColor",strokeWidth:"3"}),r.jsx("use",{href:"#SvgjsPath1022",x:"450",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"450",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"450",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"450",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1024",x:"450",y:"390",stroke:"currentColor",strokeWidth:"3"}),r.jsx("use",{href:"#SvgjsPath1023",x:"450",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"450",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"510",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"510",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"510",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"510",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"510",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"510",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"510",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"510",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"510",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"570",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"570",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"570",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"570",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"570",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"570",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"570",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"570",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"570",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1024",x:"630",y:"30",stroke:"currentColor",strokeWidth:"3"}),r.jsx("use",{href:"#SvgjsPath1023",x:"630",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1020",x:"630",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"630",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"630",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"630",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"630",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"630",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"630",y:"510",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1019",x:"690",y:"30",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"690",y:"90",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"690",y:"150",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1022",x:"690",y:"210",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"690",y:"270",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1021",x:"690",y:"330",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"690",y:"390",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"690",y:"450",stroke:"currentColor"}),r.jsx("use",{href:"#SvgjsPath1023",x:"690",y:"510",stroke:"currentColor"})]})]});var q=Object.defineProperty,V=(o,e,s)=>e in o?q(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,P=(o,e,s)=>V(o,typeof e!="symbol"?e+"":e,s);class z{constructor(e){this.appConfig=e,P(this,"email",new n("",{validators:[S()]})),P(this,"password",new n("")),P(this,"group",new k({email:this.email,password:this.password})),g(this,{handleSubmit:y.bound})}handleSubmit(){this.appConfig.auth.loginMutation.mutate({email:this.email.value,password:this.password.value})}}const O=d(function({pageModel:e}){const s=m(),{t}=p("login"),a=f(()=>new z(s),[s]);return r.jsxs(l,{layout:"vertical",onFinish:a.handleSubmit,children:[r.jsx(l.Item,{label:t("emailLabel"),name:"email",children:r.jsx(i,{placeholder:t("emailPlaceholder")})}),r.jsx(l.Item,{children:r.jsx(h,{type:"primary",htmlType:"submit",block:!0,children:t("sendLinkButton")})}),r.jsxs("div",{style:{textAlign:"center"},children:[t("rememberPassword")," ",r.jsx(h,{type:"link",onClick:e.toLogin,children:t("loginButton")})]})]})});var D=Object.defineProperty,W=(o,e,s)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,C=(o,e,s)=>W(o,typeof e!="symbol"?e+"":e,s);class G{constructor(e){this.appConfig=e,C(this,"email",new n("",{validators:[c(()=>this.t.forms("required")),S(()=>this.t.forms("invalidEmail"))]})),C(this,"password",new n("",{validators:[c(()=>this.t.forms("required"))]})),C(this,"group",new k({email:this.email,password:this.password})),g(this,{handleSubmit:y.bound})}get t(){return this.appConfig.locale.translations}get isLoading(){return this.appConfig.auth.loginMutation.isPending}handleSubmit(){if(this.group.isInvalid){this.group.setTouched(!0),this.group.setDirty(!0),this.group.firstErrorControl?.element?.focus();return}this.appConfig.auth.loginMutation.mutateAsync({email:this.email.value,password:this.password.value}).catch(e=>{this.appConfig.notify.toastError(e)})}}const H=d(function({pageModel:e}){const s=m(),{t}=p("login"),a=f(()=>new G(s),[s]);return r.jsxs(l,{layout:"vertical",onFinish:()=>{a.handleSubmit()},children:[r.jsx(l.Item,{label:t("emailLabel"),...a.email.itemProps,children:r.jsx(i,{autoComplete:"email",placeholder:t("emailPlaceholder"),...a.email.inputProps})}),r.jsx(l.Item,{label:t("passwordLabel"),...a.password.itemProps,children:r.jsx(i.Password,{autoComplete:"current-password",placeholder:t("passwordPlaceholder"),...a.password.inputProps})}),r.jsx(l.Item,{children:r.jsx(h,{type:"primary",htmlType:"submit",block:!0,loading:a.isLoading,children:t("loginButton")})}),r.jsxs("div",{style:{textAlign:"center"},children:[r.jsx(h,{type:"link",onClick:e.toForgot,children:t("card.forgot")}),r.jsx(h,{type:"link",onClick:e.toRegister,children:t("card.register")})]})]})});var U=Object.defineProperty,J=(o,e,s)=>e in o?U(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,u=(o,e,s)=>J(o,typeof e!="symbol"?e+"":e,s);class K{constructor(e){this.appConfig=e,u(this,"name",new n("",{validators:[c(()=>this.t.forms("required"))]})),u(this,"email",new n("",{validators:[c(()=>this.t.forms("required")),S(()=>this.t.forms("invalidEmail"))]})),u(this,"telegram",new n("@",{validators:[v(6,()=>this.t.forms("invalidTelegram"))],onChangeValue:s=>{s.startsWith("@")||this.telegram.setValue(`@${s}`)}})),u(this,"password",new n("",{validators:[c(()=>this.t.forms("required")),b(),v(6,()=>this.t.forms("minLength",{count:6}))]})),u(this,"repassword",new n("",{validators:[c(()=>this.t.forms("required")),b(),v(6,()=>this.t.forms("minLength",{count:6})),s=>this.password.value!==s.value?[{message:this.t.forms("passwordsDoNotMatch"),type:w.Error}]:[]]})),u(this,"agreement",new L(!1,{validators:[s=>s.value?[]:[{message:this.t.forms("required"),type:w.Error}]]})),u(this,"group",new k({name:this.name,email:this.email,telegram:this.telegram,password:this.password,repassword:this.repassword,agreement:this.agreement})),g(this,{handleSubmit:y.bound},{autoBind:!0})}get t(){return this.appConfig.locale.translations}handleSubmit(){if(this.group.isInvalid){this.group.setTouched(!0),this.group.setDirty(!0),this.group.firstErrorControl?.element?.focus();return}const{repassword:e,agreement:s,...t}=this.group.value;this.appConfig.auth.signUpMutation.mutateAsync({...t,role:"webmaster"}).catch(a=>{this.appConfig.notify.toastError(a)})}}const Q=d(function({pageModel:e}){const s=m(),{t}=p("login"),a=f(()=>new K(s),[s]);return r.jsxs(l,{layout:"vertical",onFinish:a.handleSubmit,children:[r.jsx(l.Item,{label:t("nameLabel"),...a.name.itemProps,children:r.jsx(i,{autoComplete:"name",placeholder:t("namePlaceholder"),...a.name.inputProps})}),r.jsx(l.Item,{label:t("emailLabel"),...a.email.itemProps,children:r.jsx(i,{autoComplete:"email",name:"email",placeholder:t("emailPlaceholder"),...a.email.inputProps})}),r.jsx(l.Item,{label:t("telegramLabel"),...a.telegram.itemProps,children:r.jsx(i,{autoComplete:"username",placeholder:t("emailPlaceholder"),...a.telegram.inputProps})}),r.jsx(l.Item,{label:t("passwordLabel"),...a.password.itemProps,children:r.jsx(i.Password,{autoComplete:"new-password",placeholder:t("passwordPlaceholder"),...a.password.inputProps})}),r.jsx(l.Item,{label:t("confirmPasswordLabel"),...a.repassword.itemProps,children:r.jsx(i.Password,{placeholder:t("confirmPasswordPlaceholder"),autoComplete:"new-password",...a.repassword.inputProps})}),r.jsx(l.Item,{name:"agreement",...a.agreement.itemProps,children:r.jsxs(F,{...a.agreement.inputProps,children:[t("agreementText")," ",r.jsx("a",{href:"/terms",target:"_blank",children:t("termsAndConditions")})]})}),r.jsx(l.Item,{children:r.jsx(h,{type:"primary",htmlType:"submit",block:!0,children:t("registerButton")})}),r.jsxs("div",{style:{textAlign:"center"},children:[t("alreadyHaveAccount")," ",r.jsx(h,{type:"link",onClick:e.toLogin,children:t("loginButton")})]})]})}),X="_container_66bls_1",Y="_card_66bls_87",Z="_title_66bls_101",rr="_topBar_66bls_109",er="_bg_66bls_118",sr="_lang_66bls_137",x={container:X,card:Y,title:Z,topBar:rr,bg:er,lang:sr},fr=d(function(){const e=m(),s=_(),{t}=p("login",{keyPrefix:"card"}),a=f(()=>new $,[]),j=a.mode;return r.jsxs("div",{className:x.container,children:[r.jsx("div",{className:x.bg,children:r.jsx(R,{})}),r.jsxs("div",{className:x.topBar,children:[r.jsx(h,{type:"default",shape:"circle",icon:r.jsx(I,{}),onClick:s.toggleTheme}),r.jsx(M,{overlay:"English / Русский",children:r.jsx(h,{className:x.lang,type:"default",shape:"circle",onClick:e.locale.toggleCode,children:e.locale.code})})]}),r.jsxs(T,{className:x.card,children:[r.jsx(B.Title,{level:3,className:x.title,children:t(j)}),j==="login"&&r.jsx(H,{pageModel:a}),j==="register"&&r.jsx(Q,{pageModel:a}),j==="forgot"&&r.jsx(O,{pageModel:a})]})]})});export{fr as LoginPage};
